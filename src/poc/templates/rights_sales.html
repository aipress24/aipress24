{% extends "layout.html" %}

{% block title %}Gestion des Droits de Publication{% endblock %}

{% block content %}
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

<div class="max-w-3xl mx-auto" x-data="{ licensingOption: 'all_subscribed' }">
    <!-- Breadcrumb -->
    <nav class="bg-white px-4 py-3 rounded-lg shadow-sm mb-6 text-sm">
        <a href="{{ url_for('index') }}" class="text-blue-600 hover:underline">POC Home</a>
        <span class="mx-2 text-slate-400">></span>
        <a href="#" class="text-blue-600 hover:underline">Mon Business Wall</a>
        <span class="mx-2 text-slate-400">></span>
        <a href="#" class="text-blue-600 hover:underline">Réglages</a>
        <span class="mx-2 text-slate-400">></span>
        <span class="text-slate-600">Droits de Publication</span>
    </nav>

    <div class="bg-white rounded-lg shadow-lg">
        <div class="p-6 sm:p-8">
            <!-- Header -->
            <h1 class="text-2xl font-bold text-slate-800 flex items-center gap-3">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-8 h-8 text-slate-500"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"
                    />
                </svg>
                Gestion des Droits de Publication
            </h1>
            <p class="text-slate-600 mt-1">
                Définissez ici les règles par défaut pour la vente de licences sur vos contenus éditoriaux.
            </p>
        </div>

        <div class="p-6 sm:p-8 border-t border-slate-200">
            <!-- Non-retroactive alert -->
            <div class="flex items-start p-4 mb-6 text-sm bg-blue-50 text-blue-800 border-l-4 border-blue-400 rounded-md">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-5 h-5 mr-3 flex-shrink-0"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                    />
                </svg>
                <span>Les modifications apportées ici ne s'appliqueront qu'aux futures publications et ne sont pas rétroactives.</span>
            </div>

            <form id="rights-form" @submit.prevent="handleSubmit">
                <fieldset>
                    <legend class="text-base font-semibold text-slate-900 mb-4">
                        Je veux vendre la licence d'exploitation d'un contenu éditorial pour une publication :
                    </legend>
                    <div class="space-y-5">
                        <!-- Option 1: All subscribed media -->
                        <div class="relative flex items-start">
                            <div class="flex h-6 items-center">
                                <input
                                    id="option-all-subscribed"
                                    name="licensing_option"
                                    type="radio"
                                    value="all_subscribed"
                                    x-model="licensingOption"
                                    class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-600"
                                />
                            </div>
                            <div class="ml-3 text-sm leading-6">
                                <label for="option-all-subscribed" class="font-medium text-slate-900">
                                    À tous les éditeurs de presse ou médias reconnus et abonnés à Business Wall for Media.
                                </label>
                            </div>
                        </div>

                        <!-- Option 2: Whitelist -->
                        <div class="relative flex items-start">
                            <div class="flex h-6 items-center">
                                <input
                                    id="option-whitelist"
                                    name="licensing_option"
                                    type="radio"
                                    value="whitelist"
                                    x-model="licensingOption"
                                    class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-600"
                                />
                            </div>
                            <div class="ml-3 text-sm leading-6">
                                <label for="option-whitelist" class="font-medium text-slate-900">
                                    Seulement aux éditeurs et médias que je choisis dans la liste ci-dessous (liste blanche).
                                </label>
                                <div
                                    x-show="licensingOption === 'whitelist'"
                                    x-transition
                                    class="mt-4 ml-2 p-4 bg-slate-50 border border-slate-200 rounded-md"
                                >
                                    <input
                                        type="search"
                                        class="w-full p-2 border border-slate-300 rounded-md mb-3 focus:ring-2 focus:ring-blue-500"
                                        placeholder="Rechercher un média..."
                                    />
                                    <div class="max-h-32 overflow-y-auto space-y-2 pr-2">
                                        <label class="flex items-center font-normal">
                                            <input type="checkbox" class="h-4 w-4 rounded mr-2 border-gray-300 text-blue-600 focus:ring-blue-600" />
                                            Le Monde
                                        </label>
                                        <label class="flex items-center font-normal">
                                            <input type="checkbox" class="h-4 w-4 rounded mr-2 border-gray-300 text-blue-600 focus:ring-blue-600" />
                                            Les Échos
                                        </label>
                                        <label class="flex items-center font-normal">
                                            <input type="checkbox" class="h-4 w-4 rounded mr-2 border-gray-300 text-blue-600 focus:ring-blue-600" />
                                            La Tribune
                                        </label>
                                        <label class="flex items-center font-normal">
                                            <input type="checkbox" class="h-4 w-4 rounded mr-2 border-gray-300 text-blue-600 focus:ring-blue-600" />
                                            Mediapart
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Option 3: Blacklist -->
                        <div class="relative flex items-start">
                            <div class="flex h-6 items-center">
                                <input
                                    id="option-blacklist"
                                    name="licensing_option"
                                    type="radio"
                                    value="blacklist"
                                    x-model="licensingOption"
                                    class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-600"
                                />
                            </div>
                            <div class="ml-3 text-sm leading-6">
                                <label for="option-blacklist" class="font-medium text-slate-900">
                                    À tous les éditeurs, sauf ceux qui figurent dans la liste ci-dessous (liste noire).
                                </label>
                                <div
                                    x-show="licensingOption === 'blacklist'"
                                    x-transition
                                    class="mt-4 ml-2 p-4 bg-slate-50 border border-slate-200 rounded-md"
                                >
                                    <input
                                        type="search"
                                        class="w-full p-2 border border-slate-300 rounded-md mb-3 focus:ring-2 focus:ring-blue-500"
                                        placeholder="Rechercher un média à exclure..."
                                    />
                                    <div class="max-h-32 overflow-y-auto space-y-2 pr-2">
                                        <label class="flex items-center font-normal">
                                            <input type="checkbox" class="h-4 w-4 rounded mr-2 border-gray-300 text-blue-600 focus:ring-blue-600" />
                                            Le Figaro
                                        </label>
                                        <label class="flex items-center font-normal">
                                            <input type="checkbox" class="h-4 w-4 rounded mr-2 border-gray-300 text-blue-600 focus:ring-blue-600" />
                                            Le Point
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Option 4: None -->
                        <div class="relative flex items-start">
                            <div class="flex h-6 items-center">
                                <input
                                    id="option-none"
                                    name="licensing_option"
                                    type="radio"
                                    value="none"
                                    x-model="licensingOption"
                                    class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-600"
                                />
                            </div>
                            <div class="ml-3 text-sm leading-6">
                                <label for="option-none" class="font-medium text-slate-900">
                                    À personne (les contenus n'apparaîtront pas sur MARKET/©).
                                </label>
                            </div>
                        </div>

                        <!-- Option 5: All media including institutional -->
                        <div class="relative flex items-start">
                            <div class="flex h-6 items-center">
                                <input
                                    id="option-all-media"
                                    name="licensing_option"
                                    type="radio"
                                    value="all_media"
                                    x-model="licensingOption"
                                    class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-600"
                                />
                            </div>
                            <div class="ml-3 text-sm leading-6">
                                <label for="option-all-media" class="font-medium text-slate-900">
                                    À tous les éditeurs de presse ou médias, y compris les journaux et médias institutionnels.
                                </label>
                            </div>
                        </div>
                    </div>
                </fieldset>

                <!-- Form actions -->
                <div class="mt-8 pt-6 border-t border-slate-200 flex justify-between">
                    <a href="{{ url_for('index') }}" class="inline-flex items-center gap-2 px-5 py-2.5 font-semibold text-slate-700 bg-slate-100 rounded-md hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-colors">
                        ← Retour à l'index
                    </a>
                    <button
                        type="submit"
                        class="inline-flex items-center gap-2 px-5 py-2.5 font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="2"
                            stroke="currentColor"
                            class="w-5 h-5"
                        >
                            <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                        </svg>
                        Enregistrer les préférences
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Debug info -->
    <div class="mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200">
        <p class="text-sm text-gray-600">
            <strong>Option sélectionnée :</strong> <span x-text="licensingOption" class="font-mono text-blue-600"></span>
        </p>
    </div>
</div>

<script>
    function handleSubmit() {
        alert('Préférences enregistrées ! (Démo)');
    }
</script>
{% endblock %}
