{% extends "layout.html" %}

{% block title %}Gérer mon Business Wall{% endblock %}

{% block content %}
    <div class="max-w-6xl mx-auto">
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200">
            <div class="border-b pb-6 mb-8">
                <h1 class="text-3xl font-bold text-gray-900">
                    Gérer mon Business Wall
                </h1>
                <p class="mt-2 text-gray-600">{{ bw_info.name }}</p>
                <span
                    class="inline-block mt-2 px-3 py-1 {% if bw_info.free %}
                        bg-blue-100 text-blue-800
                    {% else %}
                        bg-green-100 text-green-800
                    {% endif %} text-xs font-semibold rounded-full"
                >
                    {{ bw_info.rate_message }}
                </span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Stage 4: Manage Internal Roles -->
                <div
                    class="border border-gray-300 p-6 rounded-lg hover:shadow-md hover:border-blue-500 transition"
                >
                    <h2 class="text-xl font-semibold text-gray-800 mb-3">
                        4- Gérer les rôles internes
                    </h2>
                    <p class="text-sm text-gray-600 mb-4">
                        Nommez des Business Wall Managers et des
                        {{ bw_info.manager_role }}s au sein de votre équipe.
                    </p>
                    <a
                        href="{{ url_for('bw_activation_full.manage_internal_roles') }}"
                        class="inline-block rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700"
                    >
                        Gérer les rôles internes →
                    </a>
                </div>

                <!-- Stage 5: Manage External Partners -->
                {% if bw_type != 'pr' %}
                    <div
                        class="border border-gray-300 p-6 rounded-lg hover:shadow-md hover:border-green-500 transition"
                    >
                        <h2 class="text-xl font-semibold text-gray-800 mb-3">
                            5- Gérer les partenaires externes
                        </h2>
                        <p class="text-sm text-gray-600 mb-4">
                            Ajoutez des PR Agencies ou PR Consultants pour vous
                            représenter sur AiPRESS24.
                        </p>
                        <a
                            href="{{ url_for('bw_activation_full.manage_external_partners') }}"
                            class="inline-block rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white hover:bg-green-700"
                        >
                            Gérer les partenaires →
                        </a>
                    </div>
                {% endif %}

                <!-- Stage 6: Assign Missions/Permissions -->
                <div
                    class="border border-gray-300 p-6 rounded-lg hover:shadow-md hover:border-purple-500 transition"
                >
                    <h2 class="text-xl font-semibold text-gray-800 mb-3">
                        6- Attribuer des missions
                    </h2>
                    <p class="text-sm text-gray-600 mb-4">
                        Définissez les permissions accordées aux
                        {{ bw_info.manager_role }}s pour publier du contenu.
                    </p>
                    <a
                        href="{{ url_for('bw_activation_full.assign_missions') }}"
                        class="inline-block rounded-md bg-purple-600 px-4 py-2 text-sm font-semibold text-white hover:bg-purple-700"
                    >
                        Attribuer des missions →
                    </a>
                </div>

                <!-- Stage 7: Configure BW Content -->
                <div
                    class="border border-gray-300 p-6 rounded-lg hover:shadow-md hover:border-orange-500 transition"
                >
                    <h2 class="text-xl font-semibold text-gray-800 mb-3">
                        7- Configurer le contenu
                    </h2>
                    <p class="text-sm text-gray-600 mb-4">
                        Remplissez les informations de votre Business Wall
                        (logo, description, contacts, etc.).
                    </p>
                    <a
                        href="{{ url_for('bw_activation_full.configure_content') }}"
                        class="inline-block rounded-md bg-orange-600 px-4 py-2 text-sm font-semibold text-white hover:bg-orange-700"
                    >
                        Configurer le contenu →
                    </a>
                </div>
            </div>

            <!-- Reset button for POC -->
            <div class="mt-10 pt-6 border-t text-center">
                <form
                    method="POST"
                    action="{{ url_for('bw_activation_full.reset') }}"
                    class="inline"
                >
                    <button
                        type="submit"
                        class="text-sm text-gray-500 hover:text-gray-700 underline"
                    >
                        Réinitialiser le POC et recommencer
                    </button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
