{% extends "layout.html" %}

{% block title %}Activer votre Business Wall{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">3- Activer le Business Wall</h1>
    <p class="text-gray-600 mb-8">Choisissez le type de Business Wall qui correspond à votre organisation.</p>

    <!-- Bouton Reset -->
    <div class="mb-6">
        <form method="POST" action="{{ url_for('bw_activation.reset') }}">
            <button type="submit" class="rounded-md bg-gray-400 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-500">
                Réinitialiser
            </button>
        </form>
    </div>

    <!-- Section: GRATUIT -->
    <section class="mb-12">
        <h2 class="text-2xl font-semibold text-blue-600 mb-6 border-b pb-3">Activez votre Business Wall GRATUIT</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for type_id, info in bw_types.items() if info.free %}
            <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200 flex flex-col">
                <h3 class="font-bold text-lg text-gray-800">{{ info.name }}</h3>
                <p class="text-sm text-gray-600 mt-2 flex-grow">{{ info.description }}</p>
                <div class="mt-4 pt-4 border-t">
                    <p class="text-xs text-gray-500 mb-2">Activation requise :</p>
                    <p class="text-sm text-gray-700 mb-4">{{ info.activation_text }}</p>

                    <form method="POST" action="{{ url_for('bw_activation.activate_free', bw_type=type_id) }}">
                        <div class="mb-4">
                            <label class="flex items-start">
                                <input type="checkbox" name="cgv_accepted" required class="mt-1 mr-3 h-5 w-5 text-blue-600">
                                <span class="text-xs text-gray-700">J'accepte les CGV</span>
                            </label>
                        </div>
                        <button type="submit" class="w-full rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700">
                            Activer
                        </button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Section: PAYANT -->
    <section>
        <h2 class="text-2xl font-semibold text-green-600 mb-6 border-b pb-3">Activez votre Business Wall PAYANT</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for type_id, info in bw_types.items() if not info.free %}
            <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200 flex flex-col">
                <h3 class="font-bold text-lg text-gray-800">{{ info.name }}</h3>
                <p class="text-sm text-gray-600 mt-2 flex-grow">{{ info.description }}</p>
                <div class="mt-4 pt-4 border-t">
                    <p class="text-xs text-gray-500 mb-2">Étape 1 : Saisir les informations de tarification</p>
                    <form method="POST" action="{{ url_for('bw_activation.set_pricing', bw_type=type_id) }}">
                        <div class="mb-4">
                            <label for="{{ info.pricing_field }}_{{ type_id }}" class="block text-sm font-medium text-gray-700">
                                {{ info.pricing_label }}
                            </label>
                            <input
                                type="number"
                                name="{{ info.pricing_field }}"
                                id="{{ info.pricing_field }}_{{ type_id }}"
                                min="1"
                                required
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm px-3 py-2 border"
                                placeholder="{{ info.pricing_placeholder }}">
                            <p class="mt-1 text-xs text-gray-500">Ce nombre déterminera dynamiquement le tarif de votre abonnement.</p>
                        </div>
                        <button type="submit" class="w-full rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-700">
                            Étape 2 : Procéder au paiement
                        </button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}
